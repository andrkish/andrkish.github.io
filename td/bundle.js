!function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppFacade=void 0,n.AppFacade=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}},{}],2:[function(e,t,n){"use strict";var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;function o(e,t){a(this,o),this.mouseX=e,this.mouseY=t}var s=e("./Geom"),c=e("./Render"),u=e("./Grid"),e=(r(l,[{key:"initializeEvents",value:function(){var n=this,r=this.input;this.appFacade.canvas.addEventListener("mousemove",function(e){var t=n.appFacade.canvas.getBoundingClientRect();r.mouseX=e.clientX-t.left,r.mouseY=e.clientY-t.top}),this.appFacade.canvas.addEventListener("mouseleave",function(e){r.mouseX=-1,r.mouseY=-1})}},{key:"drawTileSelect",value:function(){var e,t,n,r=this.input,i=r.mouseX,a=r.mouseY,i="mouseX: "+Math.floor(i)+", mouseY: "+Math.floor(a);0<=r.mouseX&&0<=r.mouseY&&(a=this.grid.cellWidth,e=this.grid.cellHeight,i+="; column: "+(t=Math.floor(r.mouseX/a))+", row: "+(r=Math.floor(r.mouseY/e)),n=new c.Sprite(this.resources.getImage("core_tiles.png"),new s.Rectangle(32,0,32,32)),this.render.drawSizedSprite(n,t*a,r*e)),this.appFacade.footerTxt.textContent=i}},{key:"drawSpawnPoints",value:function(){var e=new c.Sprite(this.resources.getImage("core_tiles.png"),new s.Rectangle(0,0,32,32));this.render.drawSizedSprite(e,0,128),this.render.drawSizedSprite(e,0,256)}},{key:"drawGrid",value:function(){for(var e=this.grid,t=0;t<e.total;t++){var n=e.toPoint(t);this.render.drawSprite(this.gridSprite,new s.Rectangle(n.column*e.cellWidth,n.row*e.cellHeight,32,32))}}},{key:"drawPawns",value:function(){var e=new c.Sprite(this.resources.getImage("sp_grunt.png"),new s.Rectangle(158,0,64,64));this.render.drawSprite(e,new s.Rectangle(32,304,48,48)),this.render.drawSprite(e,new s.Rectangle(32,208,48,48))}},{key:"drawTowers",value:function(){var e=new c.Sprite(this.resources.getImage("sp_buildings.png"),new s.Rectangle(400,135,64,64)),e=(this.render.drawSprite(e,new s.Rectangle(256,288,32,32)),this.render.drawSprite(e,new s.Rectangle(256,192,32,32)),this.render.drawSprite(e,new s.Rectangle(256,96,32,32)),new c.Sprite(this.resources.getImage("sp_buildings.png"),new s.Rectangle(0,0,128,128)));this.render.drawSprite(e,new s.Rectangle(512,320,64,64))}}]),l);function l(e,t){var n=this;a(this,l),this.appFacade=e,this.resources=t,this.frames=0,this.update=function(){n.frames++,n.drawGrid(),n.drawSpawnPoints(),n.drawPawns(),n.drawTowers(),n.drawTileSelect(),requestAnimationFrame(n.update)},this.input=new o(-1,-1),this.initializeEvents(),this.render=new c.Render(e),this.gridSprite=new c.Sprite(t.getImage("sp_tiles.png"),new s.Rectangle(462,594,32,32)),this.grid=new u.Grid(18,30,32,32),this.update()}n.Game=e},{"./Geom":3,"./Grid":4,"./Render":5}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Rectangle=void 0,n.Rectangle=function e(t,n,r,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.x=t,this.y=n,this.w=r,this.h=i}},{}],4:[function(e,t,n){"use strict";var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n,r){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.rows=e,this.columns=t,this.cellWidth=n,this.cellHeight=r,this.total=e*t}Object.defineProperty(n,"__esModule",{value:!0}),n.Grid=void 0,r(a,[{key:"toPoint",value:function(e){return{row:Math.floor(e/this.columns),column:e%this.columns}}},{key:"toIndex",value:function(e,t){return e*this.columns+t}}]),n.Grid=a},{}],5:[function(e,t,n){"use strict";var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Sprite=n.Render=void 0;var o=e("./Geom"),e=(n.Sprite=function e(t,n){a(this,e),this.spritesheet=t,this.rect=n},r(s,[{key:"drawSprite",value:function(e,t){this.appFacade.context.drawImage(e.spritesheet,e.rect.x,e.rect.y,e.rect.w,e.rect.h,t.x,t.y,t.w,t.h)}},{key:"drawSizedSprite",value:function(e,t,n){this.drawSprite(e,new o.Rectangle(t,n,e.rect.w,e.rect.h))}}]),s);function s(e){a(this,s),this.appFacade=e}n.Render=e},{"./Geom":3}],6:[function(e,t,n){"use strict";var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.images=new Map}Object.defineProperty(n,"__esModule",{value:!0}),n.Resources=void 0,r(a,[{key:"addImage",value:function(e,t){this.images.set(e,t)}},{key:"getImage",value:function(e){return this.images.get(e)}}]),n.Resources=a},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Resources"),c=e("./AppFacade"),u=e("./Game");function r(){var e=document.getElementById("canvas"),t=e.getContext("2d"),n=(t.imageSmoothingEnabled=!1,document.getElementById("footer_txt")),r=new c.AppFacade,i=(r.canvas=e,r.context=t,r.footerTxt=n,["sp_buildings.png","sp_grunt.png","sp_tiles.png","test_sprites.png","core_tiles.png"]),a=new s.Resources,o=0;i.forEach(function(t){var n=new Image;n.onload=function(){var e;console.log("asset is loaded: "+t),a.addImage(t,n),(o+=1)==i.length&&(console.log("All assets has been loaded, total: "+o),e=new u.Game(r,a),window.game=e)},n.src=t})}"complete"==document.readyState?r():window.onload=function(){r()}},{"./AppFacade":1,"./Game":2,"./Resources":6}]},{},[7]);